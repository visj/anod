var anod=(function(){function e(){this.j=[];this.h=0}function h(a,b){for(var c=0;c<a.h;c++){var d=a.j[c];d.g&2&&d.K(b);a.j[c]=null}a.h=0}var k={},l=1,m=new e,p=new e,q=new e,r=new e,t={s:0,i:null,l:null};function u(){m.h=p.h=q.h=r.h=0}function v(a,b){var c=-1,d=null===b.F?-1:null===b.A?0:b.A.length;null===a.C?(a.C=b,a.M=d,a.g|=128):(null===a.v?(c=0,a.v=[b],a.G=[d]):(c=a.v.length,a.v[c]=b,a.G[c]=d),a.g|=256);null===b.F?(b.F=a,b.R=c,b.g|=512):(null===b.A?(b.A=[a],b.J=[c]):(b.A[d]=a,b.J[d]=c),b.g|=1024)}function w(){var a=t.i,b=t.l;try{y()}finally{t.s=0,t.i=a,t.l=b}}function y(){for(var a,b=0;0!==p.h||0!==q.h||0!==r.h||0!==m.h;){a=++l;if(0!==m.h){t.s=2;for(var c=m,d=0;d<c.h;d++)c.j[d].H(),c.j[d]=null;c.h=0}0!==p.h&&(t.s=3,h(p,a));0!==q.h&&(t.s=4,h(q,a));0!==r.h&&(t.s=5,h(r,a));if(1E5<b++)throw Error(1);}}function z(a){var b,c=a.g;if(c&64){var d=a.B;for(b=d.length;b--;)d[b].H();a.B=null}if(c&32768){c=a.I;for(b=c.length;b--;)c[b](!0);a.I=null}}function A(){}function B(){this.g=0;this.B=[];this.I=null}B.prototype.H=function(){4!==this.g&&(z(this),this.g=4)};function C(a){var b=a.g;b&128&&(D(a.C,a.M),a.C=null);if(b&256)for(b=a.v.length;b--;)D(a.v[b],a.G[b]);a.L=a.v=a.G=null}function E(a,b){if(4!==a.g)if(-1===b)a.C=null,a.g&=-129;else{var c=a.v,d=a.G,f=c.pop(),g=d.pop(),n=c.length;b!==n&&(c[b]=f,d[b]=g,-1===g?f.R=b:f.J[g]=b);0===n&&(a.g&=-257)}}function D(a,b){if(4!==a.g)if(-1===b)a.F=null,a.g&=-513;else{var c=a.A,d=a.J,f=c.pop(),g=d.pop(),n=c.length;b!==n&&(c[b]=f,d[b]=g,-1===g?f.M=b:f.G[g]=b);0===n&&(a.g&=-1025)}}function F(a,b){var c=a.g,d=a.C;c&128&&(d.u<b&&(d.u=b,d.g&=-6171),d.g&3||G(d,b));if(c&256){a=a.v;c=a.length;for(var f=0;f<c;f++)d=a[f],d.u<b&&(d.u=b,d.g&=-6171),d.g&3||G(d,b)}}function H(a,b){var c=a.g,d=a.C;c&128&&(d.u<b&&(d.u=b,d.g&=-6171),d.g&11||I(d,b));if(c&256){a=a.v;c=a.length;for(var f=0;f<c;f++)d=a[f],d.u<b&&(d.u=b,d.g&=-6171),d.g&11||I(d,b)}}function J(a,b){for(var c=a.B,d=0,f=c.length;d<f;d++){var g=c[d];g.u<b&&(g.u=b,g.g&=-6171);if(g.g&384&&g.g&1536&&!(g.g&21)){g.i=a;var n=b;g.g|=16;64===(g.g&72)&&J(g,n)}}}function K(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];d.g&5||d.S()}}function L(a,b){this.g=void 0===b?0:null===b?8192:16384;this.h=a;this.L=b;this.C=null;this.M=-1;this.G=this.v=null;this.j=k}L.prototype=new A;L.prototype.val=function(){var a=t.l;null===a||this.g&37||v(this,a);return this.h};L.prototype.peek=function(){return this.h};L.prototype.update=function(a){var b=this.g;if(!(b&37)&&(b&8192||(b&16384?!this.L(a,this.h):a!==this.h)))if(0===t.s)u(),this.h=a,F(this,l+1),w();else{if(this.j!==k&&a!==this.j)throw Error(2);this.j=a;this.g|=2;p.j[p.h++]=this}};L.prototype.H=function(){4!==this.g&&(C(this),this.h=this.j=null,this.g=4)};L.prototype.K=function(a){this.h=this.j;this.j=k;this.g&=-3;F(this,a)};L.prototype.S=function(){this.g=1};function M(a){var b=a.g;b&512&&(E(a.F,a.R),a.F=null);if(b&1024)for(b=a.A.length;b--;)E(a.A.pop(),a.J.pop());a.g&=-1537}function N(a,b,c){var d=0,f;if(null!=c){if(null!=c.compare){var g=c.compare;d=null==c.compare?d|8192:d|16384}c.unstable&&(d|=65536);c.defer&&(d|=262144);c.sample&&(d|=131072);var n=c.args;null!=c.source&&("function"===typeof c.source?d|=65536:f=c.source)}this.g=d;this.h=b;this.L=g;this.C=null;this.M=-1;this.G=this.v=null;this.j=a;this.i=this.I=this.B=null;this.u=0;this.F=null;this.R=0;this.J=this.A=null;this.P=n;if(void 0!==f)if(f instanceof Array)for(a=0;a<f.length;a++)v(f[a],this);else v(f,this)}N.prototype=new A;N.prototype.val=function(){var a=this.g;if(!(a&5)){var b=l,c=t.s,d=t.l;0!==c&&this.u===b&&(18===(a&18)||4===c&&a&24?O(this,b):a&2&&this.K(b));null===d||this.g&37||v(this,d)}return this.h};N.prototype.peek=function(){var a=this.g,b=l,c=t.s;a&5||0===c||this.u!==b||(18===(a&18)||4===c&&a&24?O(this,b):a&2&&this.K(b));return this.h};N.prototype.H=function(){4!==this.g&&(z(this),C(this),M(this),this.h=this.j=this.P=this.A=this.J=null,this.g=4)};N.prototype.K=function(a){var b,c=t.i,d=t.l;t.i=t.l=null;var f=this.g;if(f&64){var g=this.B;for(b=g.length;b--;)g.pop().H();this.g&=-65}if(f&32768){g=this.I;for(b=g.length;b--;)g.pop()(!1);this.g&=-32769}t.i=this;f&65536&&(M(this),t.l=this);b=this.h;this.g|=2048;this.h=this.j(b,this.P);this.g&=-6171;f&8192||!(f&384)||(f&16384?this.L(b,this.h):b===this.h)||F(this,a);t.i=c;t.l=d};N.prototype.S=function(){var a=this.g;this.g=(a|1)&-27;64===(a&66)&&K(this.B)};function I(a,b){a.g|=8;64===(a.g&80)&&J(a,b);a.g&384&&H(a,b)}function G(a,b){var c=a.g;a.g|=2;c&64&&K(a.B);!(c&8192)&&c&384?(q.j[q.h++]=a,c&8||H(a,b)):(r.j[r.h++]=a,c&384&&F(a,b))}function O(a,b){if(a.g&4096)throw Error(1);a.g|=4096;a.g&16&&(O(a.i,b),a.i=null);a:if(8===(a.g&13)){if(a.g&512){var c=a.F;if(c.u===b&&c.g&8&&(O(a.F,b),a.g&3))break a}if(a.g&1024)for(var d=a.A,f=d.length,g=0;g<f;g++)if(c=d[g],c.u===b&&c.g&8&&(O(c,b),a.g&3))break a}a.g&=-4121;if(a.g&2){if(a.g&2048)throw Error(1);a.K(b)}}function P(a){a.g&37||(0===t.s?a.H():(a.g|=32,m.j[m.h++]=a))}function Q(a,b,c){a=new N(a,b,c);b=t.i;c=t.l;t.i=t.l=a;if(0===t.s){u();t.s=1;try{a.h=a.j(a.h,a.P),0===p.h&&0===m.h||y()}finally{t.s=0,t.i=t.l=null}}else a.h=a.j(a.h,a.P);if(null!==b){b.g|=64;var d=b.B;null===d?b.B=[a]:d[d.length]=a}t.i=b;t.l=c;return a}return{root:function(a){var b=null,c=t.i,d=t.l;if(0!==a.length){b=new B;var f=function(){P(b)}}t.l=null;t.i=b;try{return a(f)}finally{t.i=c,t.l=d}},dispose:P,sample:function(a){var b=t.l;t.l=null;a=a();t.l=b;return a},batch:function(a){0===t.s?(t.s=1,u(),a(),w()):a()},cleanup:function(a){var b=t.i;if(null!==b){b.g|=32768;var c=b.I;null===c?b.I=[a]:c[c.length]=a}},stable:function(){null!==t.i&&(t.i.g&=-65537)},data:function(a){return new L(a,null)},value:function(a,b){return new L(a,b)},compute:Q,A:A,v:v,Q:Q,N:N,L:L}})();