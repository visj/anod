(function(){function E(t){var i,n,r=h.E,a=h.i,o=h.r;t.length===0?i=r:(i=new x,r!==null&&r.x(i),n=function(){i.dispose()}),h.r=null,h.E=h.i=i;try{return t(n)}finally{h.E=r,h.i=a,h.r=o}}function b(t,i){return new C(t,i)}function u(t,i,n,r){return new p(t,i,0,n,r).U()}function d(){this.d=[],this.o=0,this.n=0}d.prototype.S=function(t){this.d[this.n++]=t};d.prototype.k=function(){for(;this.o<this.n;this.o++)this.d[this.o].t&=-3099,this.d[this.o]=null;this.n=this.o=0};d.prototype.l=function(){for(;this.o<this.n;this.o++)this.d[this.o].l(),this.d[this.o]=null;this.n=this.o=0};d.prototype.p=function(){for(;this.o<this.n;this.o++){var t=this.d[this.o];t.t&2&&t.p(),t.t&=-3099,this.d[this.o]=null}this.n=this.o=0};var T={},y=1,c=0,m=new d,D=new d,U=new d,R=new d,h={E:null,i:null,r:null};function S(t){throw new Error(t)}function k(){m.n=D.n=U.n=R.n=0}function I(t,i){var n=-1,r=i.v===null?-1:i.s===null?0:i.s.length;t.c===null?(t.c=i,t.m=r,t.t|=64):t.h===null?(n=0,t.h=[i],t.C=[r],t.t|=128):(n=t.h.length,t.h[n]=i,t.C[n]=r,t.t|=128),i.v===null?(i.v=t,i.T=n,i.t|=256):i.s===null?(i.s=[t],i.g=[n],i.t|=512):(i.s[r]=t,i.g[r]=n,i.t|=512)}function B(){var t=h.i,i=h.r;try{W()}finally{c=0,h.i=t,h.r=i}}function W(){for(var t=0,i=m,n=D,r=U,a=R;n.n!==0||i.n!==0||r.n!==0||a.n!==0;)y++,i.n!==0&&(c=2,i.l()),n.n!==0&&(c=3,n.p()),r.n!==0&&(c=4,r.p()),a.n!==0&&(c=5,a.p()),t++>1e5&&S("cycle detected")}function O(){this.t&5||(c===0?this.l():m.S(this))}function A(t){var i=0,n=0,r=t.t;if(r&32){var a=t.f;for(n=a.length;i<n;i++)a[i].l();t.f=null}if(r&16384){var o=t.y;for(i=0,n=o.length;i<n;i++)o[i](!0);t.y=null}}function N(t){this.t|=32,this.f===null?this.f=[t]:this.f[this.f.length]=t}function P(t){this.t|=16384,this.y===null?this.y=[t]:this.y[this.y.length]=t}function x(){this.t=0,this.f=[],this.y=null}x.prototype.dispose=O;x.prototype.l=function(){A(this),this.t=4};x.prototype.x=N;x.prototype.R=P;function G(t){var i=t.t;if(i&64&&(F(t.c,t.m),t.c=null),i&128)for(var n=t.h.length;n-- >0;)F(t.h[n],t.C[n]);t.D=t.h=t.C=null}function $(t,i){if(t.t!==4)if(i===-1)t.c=null,t.t&=-65;else{var n=t.h,r=t.C,a=n.pop(),o=r.pop(),e=n.length;i!==e&&(n[i]=a,r[i]=o,o===-1?a.T=i:a.g[o]=i),e===0&&(t.t&=-129)}}function F(t,i){var n=t.t;if(n!==4)if(i===-1)t.v=null,t.t&=-257;else{var r=t.s,a=t.g,o=r.pop(),e=a.pop(),v=r.length;i!==v&&(r[i]=o,a[i]=e,e===-1?o.m=i:o.C[e]=i),v===0&&(t.t&=-513)}}function M(t,i){var n=t.t,r=t.c;if(n&64&&(r.e<i&&(r.e=i,r.t&=-3099),r.t&3||r.O()),n&128)for(var a=t.h,o=a.length,e=0;e<o;e++)r=a[e],r.e<i&&(r.e=i,r.t&=-3099),r.t&3||r.O()}function V(t,i){var n=t.t,r=t.c;if(n&64&&(r.e<i&&(r.e=i,r.t&=-3099),r.t&11||r.$()),n&128)for(var a=t.h,o=a.length,e=0;e<o;e++)r=a[e],r.e<i&&(r.e=i,r.t&=-3099),r.t&11||r.$()}function H(t,i){for(var n=t.f,r=0,a=n.length;r<a;r++){var o=n[r];o.e<i&&(o.e=i,o.t&=-3099),o.t&192&&o.t&768&&!(o.t&21)&&(o.i=t,o.b())}}function Q(t){for(var i=t.length,n=0;n<i;n++){var r=t[n];r.t&5||r.F()}}function C(t,i){this.t=i===null?4096:i!==void 0?8192:0,this.a=t,this.D=i,this.c=null,this.m=-1,this.h=null,this.C=null,this.u=T,h.i!==null&&h.i.x(this)}C.prototype.dispose=O;C.prototype.peek=function(){return this.a};C.prototype.val=function(){return h.r!==null&&!(this.t&5)&&I(this,h.r),this.a};C.prototype.update=function(t){var i=this.t;i&5||(i&4096||(i&8192?!this.D(t,this.a):t!==this.a))&&(c===0?(k(),this.a=t,M(this,y+1),B()):(this.u!==T&&t!==this.u&&S("conflicting values"),this.u=t,this.t|=2,D.S(this)))};C.prototype.l=function(){G(this),this.a=this.u=null,this.t=4};C.prototype.p=function(){this.a=this.u,this.u=T,M(this,y)};C.prototype.F=function(){this.t=1};function X(t){var i=t.t;if(i&256&&($(t.v,t.T),t.v=null),i&512)for(var n=t.s.length;n-- >0;)$(t.s.pop(),t.g.pop());t.t&=-769}function p(t,i,n,r,a){this.t=n|(r===null?4096:r!==void 0?8192:0),this.a=i,this.D=r,this.c=null,this.m=-1,this.h=null,this.C=null,this.u=t,this.f=null,this.y=null,this.i=null,this.e=0,this.v=null,this.T=0,this.s=null,this.g=null,this.M=a}p.prototype.dispose=O;p.prototype.x=N;p.prototype.R=P;p.prototype.val=function(){var t=this.t;if(!(t&5)){var i=y,n=c;n!==0&&this.e===i&&(t&2?t&16?this.w(i):t&2&&this.p():n===4&&t&24&&this.w(i)),h.r!==null&&!(this.t&5)&&I(this,h.r)}return this.a};p.prototype.peek=function(){return c!==0&&this.e===y&&!(this.t&5)&&this.t&26&&this.w(y),this.a};p.prototype.l=function(){A(this),G(this),X(this),this.a=this.u=this.M=this.s=this.g=null,this.t=4};p.prototype.p=function(){var t=0,i=0,n=h.i,r=h.r;h.i=h.r=null;var a=this.t;if(a&32){var o=this.f;for(i=o.length;t<i;t++)o[t].l();o.length=0,this.t&=-33}if(a&16384){var e=this.y;for(i=e.length,t=0;t<i;t++)e[t](!1);e.length=0,this.t&=-16385}h.i=this,a&32768&&(X(this),h.r=this);var v=this.a;this.t|=1024,this.a=this.u(v,this.M),a&192&&!(a&4096)&&(a&8192?!this.D(v,this.a):v!==this.a)&&M(this,y),h.i=n,h.r=r};p.prototype.U=function(){var t=h.i,i=h.r;if(t!==null&&t.x(this),h.i=h.r=this,c===0){k(),c=1;try{this.a=this.u(this.a,this.M),(D.n>0||m.n>0)&&W()}finally{c=0,h.i=h.r=null}}else this.a=this.u(this.a,this.M);return h.i=t,h.r=i,this};p.prototype.F=function(){var t=this.t;this.t=(t|1)&-3,(t&34)===32&&Q(this.f)};p.prototype.b=function(){this.t|=16,(this.t&40)===32&&H(this,y)};p.prototype.$=function(){var t=this.t;this.t|=8,(t&48)===32&&H(this,y),t&192&&V(this,y)};p.prototype.O=function(){var t=this.t;this.t|=2,t&32&&Q(this.f),t&192&&!(t&4096)?(U.S(this),t&8||V(this,y)):(R.S(this),t&192&&M(this,y))};p.prototype.w=function(t){this.t&2048&&S("cyclic dependency"),this.t|=2048,this.t&16&&(this.i.w(t),this.i=null);t:if((this.t&13)===8){if(this.t&256){var i=this.v;if(i.e===t&&i.t&8&&(this.v.w(t),this.t&3))break t}if(this.t&512){for(var n=this.s,r=n.length,a=0;a<r;a++)if(i=n[a],i.e===t&&i.t&8&&(i.w(t),this.t&3))break t}}this.t&=-2073,this.t&2&&(this.t&1024&&S("cyclic dependency"),this.p())};function j(){return performance.now()}var f=1e6,z=[];function g(t){z.push(t)}J();console.log(z.join("\n"));function J(){var t=0;t+=s(w,f,f),t+=s(Y,f,0),t+=s(it,f,f),t+=s(nt,f/2,f),t+=s(rt,f/4,f),t+=s(at,f/1e3,f),t+=s(tt,f,f/2),t+=s(q,f,f/4),t+=s(_,f,f/8),t+=s(Z,f,f/1e3),g("---");var i=0;i+=s(ut,f*4,1),i+=s(st,f*2,2),i+=s(lt,f,4),i+=s(pt,f/100,1e3),i+=s(vt,f*4,1),i+=s(ct,f*4,1),i+=s(yt,f*4,1),g("---"),g("create total: ".concat(t.toFixed(0))),g("update total: ".concat(i.toFixed(0))),g("total: ".concat((t+i).toFixed(0)))}function s(t,i,n){var r=L(t,i,n);return K(t.name,{ms:r,mem:0}),r}function K(t,i){g("".concat(t.padEnd(30)," ").concat(i.ms.toFixed(1).padStart(5)," ").concat((i.mem/1e3).toFixed(0).padStart(10)))}function L(t,i,n){var r,a;return E(function(o){var e=w(n,[]);t(i/100,e),e=w(n,[]),t(i/100,e),e=w(n,[]),t(i/100,e),e=w(n,[]);for(var v=0;v<n;v++)e[v].val(),e[v].val(),e[v].val();o()}),E(function(o){var e=w(n,[]);r=j(),t(i,e),a=j(),e=null,o()}),a-r}function w(t,i){for(var n=0;n<t;n++)i[n]=b(n);return i}function Y(t,i){for(var n=0;n<t;n++)ot(n)}function Z(t,i){for(var n=0;n<t/1e3;n++)for(var r=0;r<1e3;r++)l(i[n])}function _(t,i){for(var n=0;n<t/8;n++)l(i[n]),l(i[n]),l(i[n]),l(i[n]),l(i[n]),l(i[n]),l(i[n]),l(i[n])}function q(t,i){for(var n=0;n<t/4;n++)l(i[n]),l(i[n]),l(i[n]),l(i[n])}function tt(t,i){for(var n=0;n<t/2;n++)l(i[n]),l(i[n])}function it(t,i){for(var n=0;n<t;n++)l(i[n])}function nt(t,i){for(var n=0;n<t;n++)et(i[n*2],i[n*2+1])}function rt(t,i){for(var n=0;n<t;n++)ht(i[n*4],i[n*4+1],i[n*4+2],i[n*4+3])}function at(t,i){for(var n=0;n<t;n++)ft(i,n*1e3)}function ot(t){u(function(){return t})}function l(t){u(function(){return t.val()})}function et(t,i){u(function(){return t.val()+i.val()})}function ht(t,i,n,r){u(function(){return t.val()+i.val()+n.val()+r.val()})}function ft(t,i){u(function(){for(var n=0,r=0;r<1e3;r++)n+=t[i+r].val();return n})}function ut(t,i){var n=i[0];u(function(){return n.val()});for(var r=0;r<t;r++)n.update(r)}function st(t,i){var n=i[0],r=i[1];u(function(){return n.val()+r.val()});for(var a=0;a<t;a++)n.update(a)}function lt(t,i){var n=i[0],r=i[1],a=i[2],o=i[3];u(function(){return n.val()+r.val()+a.val()+o.val()});for(var e=0;e<t;e++)n.update(e)}function pt(t,i){var n=i[0];u(function(){for(var a=0,o=0;o<1e3;o++)a+=i[o].val();return a});for(var r=0;r<t;r++)n.update(r)}function vt(t,i){var n=i[0];u(function(){return n.val()}),u(function(){return n.val()});for(var r=0;r<t/2;r++)n.update(r)}function ct(t,i){var n=i[0];u(function(){return n.val()}),u(function(){return n.val()}),u(function(){return n.val()}),u(function(){return n.val()});for(var r=0;r<t/4;r++)n.update(r)}function yt(t,i){for(var n=i[0],r=0;r<1e3;r++)u(function(){return n.val()});for(var r=0;r<t/1e3;r++)n.update(r)}})();
